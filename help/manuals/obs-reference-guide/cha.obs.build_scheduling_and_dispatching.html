<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Scheduling and Dispatching | Open Build Service</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="book-title" content="Open Build Service" /><meta name="chapter-title" content="Chapter 19. Scheduling and Dispatching" /><link rel="home" href="index.html" title="Open Build Service" /><link rel="up" href="index.html" title="Open Build Service" /><link rel="prev" href="cha.obs.admin.html" title="Chapter 18. Administration" /><link rel="next" href="cha.obs.build_job_constraints.html" title="Chapter 20. Build Job Constraints" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  if (agent.indexOf('android') != -1 && agent.indexOf('chrom') != -1 ) {
      file = 'fonts-nolocal.css';
  }
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.build_scheduling_and_dispatching.html">Scheduling and Dispatching</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Open Build Service</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="cha.obs.motivation.html"><span class="number">1 </span><span class="name">Distributing Free Software: Herding Cats</span></a></li><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">2 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">3 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">4 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.build_containers.html"><span class="number">5 </span><span class="name">Build Containers</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">6 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_ystem.html"><span class="number">7 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">8 </span><span class="name">Package Formats</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">9 </span><span class="name">Image templates</span></a></li><li class="inactive"><a href="cha.obs.build_config.html"><span class="number">10 </span><span class="name">Build Configuration</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">11 </span><span class="name">Source Services</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">12 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.signing.html"><span class="number">13 </span><span class="name">Signing</span></a></li><li class="inactive"><a href="cha.obs.product_building.html"><span class="number">14 </span><span class="name">Product Building</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">15 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">16 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.cross_arch_build.html"><span class="number">17 </span><span class="name">Cross Architecture Build</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">18 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">19 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">20 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">21 </span><span class="name">Build Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">22 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">23 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">24 </span><span class="name">openSUSE Factory</span></a></li><li class="inactive"><a href="go01.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="appendix.work_on_obs_book.html"><span class="number">A </span><span class="name">How to work on this Book</span></a></li><li class="inactive"><a href="apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 18. Administration" href="cha.obs.admin.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 20. Build Job Constraints" href="cha.obs.build_job_constraints.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.build_scheduling_and_dispatching.html">Scheduling and Dispatching</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 18. Administration" href="cha.obs.admin.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 20. Build Job Constraints" href="cha.obs.build_job_constraints.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.build_scheduling_and_dispatching"><div class="titlepage"><div><div><h1 class="title"><span class="number">19 </span><span class="name">Scheduling and Dispatching</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="cha.obs.build_scheduling_and_dispatching.html#idm140487589574960"><span class="number">19.1 </span><span class="name">How is a build process defined</span></a></span></dt><dt><span class="section"><a href="cha.obs.build_scheduling_and_dispatching.html#idm140487591608464"><span class="number">19.2 </span><span class="name">Scheduling strategies</span></a></span></dt></dl></div></div><p>
  One of the major functionalities of OBS is to calculate always the current
  state, based on available sources, binaries and user configurations. In case
  a change happened it will trigger builds to achieve a clean state again. The
  calculation of the need of a build job is called scheduling here. The
  assignment of a build job to a concrete build host (aka worker) is called
  dispatching.
 </p><div class="section " id="idm140487589574960"><div class="titlepage"><div><div><h2 class="title" id="idm140487589574960"><span class="number">19.1 </span><span class="name">How is a build process defined</span> <a title="Permalink" class="permalink" href="cha.obs.build_scheduling_and_dispatching.html#idm140487589574960">#</a></h2></div></div></div><p>
   A build process is calculated and executed based on the following
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
      The sources of a package defined which dependencies are required at build time. eg. <em class="parameter ">BuildRequires</em> 
      lines in spec files defined which other packages must get installed to build a package
    </li><li class="listitem ">
      The project configuration of the package defines repositories and architectures to build for.
      In case other repositories are used as a base the configuration from there is also considered.
    </li><li class="listitem ">
      Dependencies of packages which are required are considered as well.
    </li><li class="listitem ">
      Constraints regarding the worker are considered. A package may require certain amount of 
      resources or specific features to build. Please check the constraints chapter for details.
      However, apart from this the build should be independent of the specific worker where
      the job gets dispatched to.
    </li></ul></div></div><div class="section " id="idm140487591608464"><div class="titlepage"><div><div><h2 class="title" id="idm140487591608464"><span class="number">19.2 </span><span class="name">Scheduling strategies</span> <a title="Permalink" class="permalink" href="cha.obs.build_scheduling_and_dispatching.html#idm140487591608464">#</a></h2></div></div></div><p>
   The defaults have the goal of creating an always reproducible state. This
   may lead to more builds then practically necessary, but ensures that no
   hidden incompabilities exist between packages and also that the same state
   can later be achieved again (with a subsequent rebuild of the same sources
   and configurations). This can also lead to multiple builds of the same
   package in the case of dependency loops.
  </p><p>
   In some setups this may not be wanted, so each repository can be configured
   in a different way. The usual options to modify the project meta
   configurations can be used to configure different strategies. For example
   using osc:
</p><div class="verbatim-wrap"><pre class="screen"><code class="command">
	 osc meta prj -e YOUR_PROJECT
	 </code></pre></div><p>
   A repository is configured as following by default, however only the name
   attribute is required to be set. </p><div class="verbatim-wrap"><code class="computeroutput">
# Example
	 &lt;repository name="standard" rebuild="transitive" block="all" linkedbuild="off"&gt;
	     ...
	 &lt;/repository&gt;
         
   </code></div><p>
  </p><div class="section " id="idm140487587029296"><div class="titlepage"><div><div><h3 class="title" id="idm140487587029296"><span class="number">19.2.1 </span><span class="name">Build Trigger Setting</span> <a title="Permalink" class="permalink" href="cha.obs.build_scheduling_and_dispatching.html#idm140487587029296">#</a></h3></div></div></div><p>
    The build trigger setting can be set via the "rebuild" attribute. Possible
    settings are
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm140487588604752"><span class="term ">transitive</span></dt><dd><p>
        The default behaviour, do a clean build of all depending packages
       </p></dd><dt id="idm140487588912864"><span class="term ">direct</span></dt><dd><p>
        Just build the package with changed sources and direct depending
        packages. But not indirect depending packages.
       </p></dd><dt id="idm140487598645984"><span class="term ">local</span></dt><dd><p>
        Just build packages with changed sources.
       </p></dd></dl></div><p>
    </p><div id="idm140487589597824" class="admonition note"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>
      Note: You can run into dependency problems in case you select
      <em class="parameter ">direct</em> or <em class="parameter ">local</em> without
      noticing this in the build state. Your packages might not even be
      installable or have random runtime errors (like not starting up or
      crashing applications), even when they claim to be "succeeded". Also, you
      cannot be sure that you will be able to re-build them later. So never do
      a official shipment with this setting of a release. This knob is exposed
      to allow deliberate suppression of the strictly reproducible builds (for
      example, to limit burning CPU unnecessarily).
     </p></div><p>
   </p></div><div class="section " id="idm140487589594688"><div class="titlepage"><div><div><h3 class="title" id="idm140487589594688"><span class="number">19.2.2 </span><span class="name">Block Mode</span> <a title="Permalink" class="permalink" href="cha.obs.build_scheduling_and_dispatching.html#idm140487589594688">#</a></h3></div></div></div><p>
    Usually the build of a package gets blocked when a package required to
    build it is still building atm. The "block" attribute can modify this
    behaviour:
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm140487592637472"><span class="term ">all</span></dt><dd><p>
        The default behaviour, don't start the build if a depending package is
        currently building.
       </p></dd><dt id="idm140487592635584"><span class="term ">local</span></dt><dd><p>
        Just care about packages in your project for the block mode.
       </p></dd><dt id="idm140487592633824"><span class="term ">never</span></dt><dd><p>
        Never set a package to blocked.
       </p></dd></dl></div><p>
    </p><div id="idm140487592631904" class="admonition note"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>
      Note: When using something else then "all" you will have to deal with a
      number of problems:
     </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
		Intermediate builds can have dependency and runtime problems.
	    </li><li class="listitem ">
		Your packages will get built more often, take more resources on the server side. As a result the dispatcher will rate your repository down.
	    </li></ul></div></div><p>
   </p></div><div class="section " id="idm140487598346624"><div class="titlepage"><div><div><h3 class="title" id="idm140487598346624"><span class="number">19.2.3 </span><span class="name">Follow Project Links</span> <a title="Permalink" class="permalink" href="cha.obs.build_scheduling_and_dispatching.html#idm140487598346624">#</a></h3></div></div></div><p>
    </p><div class="variablelist "><dl class="variablelist"><dt id="idm140487598345312"><span class="term ">off</span></dt><dd><p>
        DEFAULT: do not build packages from project links
       </p></dd><dt id="idm140487598343552"><span class="term ">localdep</span></dt><dd><p>
        only build project linked packages if they depend on a local package
       </p></dd><dt id="idm140487588750352"><span class="term ">all</span></dt><dd><p>
        treat packages from project links like local packages
       </p></dd></dl></div><p>
   </p></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.build_job_constraints.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 20 </span>Build Job Constraints</span></a><a class="nav-link" href="cha.obs.admin.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 18 </span>Administration</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2017 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>