<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 15. Scheduling and Dispatching</title><link rel="stylesheet" type="text/css" href="static/css/susebooks.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="self" href="cha.obs.build_scheduling_and_dispatching.html" title="Scheduling and Dispatching" /><link rel="home" href="index.html" title="Open Build Service" /><link rel="up" href="index.html" title="Open Build Service" /><link rel="previous" href="cha.obs.admin.html" title="Chapter 14. Administration" /><link rel="next" href="cha.obs.build_job_constraints.html" title="Chapter 16. Build Job Constraints" /></head><body><div class="navheader"><table width="100%" summary="Navigation header" border="0" class="bctable"><tr><td width="80%"><div class="breadcrumbs"><p><a href="index.html">Open Build Service</a><strong><a accesskey="p" title="Chapter 14. Administration" href="cha.obs.admin.html"><span>◀</span></a>  <a accesskey="n" title="Chapter 16. Build Job Constraints" href="cha.obs.build_job_constraints.html"><span>▶</span></a></strong></p></div></td></tr></table></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cha.obs.build_scheduling_and_dispatching"></a>Chapter 15. Scheduling and Dispatching<span class="permalink"><a title="Copy Permalink" href="#cha.obs.build_scheduling_and_dispatching">¶</a></span></h2></div></div></div><div class="toc"><p><strong>Contents</strong></p><dl class="toc"><dt><span class="section"><a href="cha.obs.build_scheduling_and_dispatching.html#idm140625645819760">15.1. How is a build process defined</a></span></dt><dt><span class="section"><a href="cha.obs.build_scheduling_and_dispatching.html#idm140625646640736">15.2. Scheduling strategies</a></span></dt></dl></div><p>One of the major functionalities of OBS is to calculate always the current state, based on
available sources, binaries and user configurations. In case a change happened it will trigger builds
to achieve a clean state again. The calculation of the need of a build job is called scheduling here. 
The assignment of a build job to a concrete build host (aka worker) is called dispatching.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idm140625645819760"></a>15.1. How is a build process defined<span class="permalink"><a title="Copy Permalink" href="#idm140625645819760">¶</a></span></h2></div></div></div><p>A build process is calculated and executed based on the following</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      The sources of a package defined which dependencies are required at build time. eg. "BuildRequire:" 
      lines in spec files defined which other packages must get installed to build a package
    </li><li class="listitem">
      The project configuration of the package defines repositories and architectures to build for.
      In case other repositories are used as a base the configuration from there is also considered.
    </li><li class="listitem">
      Dependencies of packages which are required are considered as well.
    </li><li class="listitem">
      Constraints regarding the worker are considered. A package may require certain amount of 
      resources or specific features to build. Please check the constraints chapter for details.
      However, apart from this the build should be independend of the concrete worker where
      the job gets dispatched to.
    </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idm140625646640736"></a>15.2. Scheduling strategies<span class="permalink"><a title="Copy Permalink" href="#idm140625646640736">¶</a></span></h2></div></div></div><p>The defaults have the goal to create an always reproducable state. This may lead to more builds
then practical necessary, but ensures that no hidden incompabilities between packages exist and also that
the state can be achieved later again. This can also lead to multiple builds of the same package in case dependency loops.</p><p>In some setups this may not be wanted, so each repository can be configured in a different way.
The usual options to modify the project meta configurations can be used to configure different startegies.
For example using osc:
	 </p><pre class="screen"><span class="command"><strong>
	 osc meta prj -e YOUR_PROJECT
	 </strong></span></pre><p>
	A repository is configured as following by default, however only the name attribute is required to be set.
	 </p><pre class="screen">
	 # Example
	 &lt;repository name="standard" rebuild="transitive" block="all" linkedbuild="off"&gt;
	     ...
	 &lt;/repository&gt;
	 </pre><p>
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm140625646460672"></a>15.2.1. Build Trigger Setting<span class="permalink"><a title="Copy Permalink" href="#idm140625646460672">¶</a></span></h3></div></div></div><p>
	The build trigger setting can be set via the "rebuild" attribute. Possible  settings are
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
	      '''transitive''': The default behaviour, do a clean build of all depending packages
	    </li><li class="listitem">
	   '''direct''': Just build the package with changed sources and direct depending packages. But not indirect depending packages.
	    </li><li class="listitem">
	      '''local''': Just build packages with changed sources.
	    </li></ul></div><p>

	Note: You can run into dependency problems in case you select "direct" or "local" without noticing this in the build state. Your packages might not even be installable or have random runtime errors (like not starting up or crashing applications), even when they claim to be "succeeded". You can also not be sure that you will be able to re-build them later. So never do a official shipment with this setting of a release.
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm140625644276912"></a>15.2.2. Block Mode<span class="permalink"><a title="Copy Permalink" href="#idm140625644276912">¶</a></span></h3></div></div></div><p>

	Usually the build of a package gets blocked when a package required to build it is still building atm. The "block" attribute can modify this behaviour:
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
	      '''all''': The default behaviour, don't start the build if a depending package is currently building.
	    </li><li class="listitem">
	      '''local''': Just care about packages in your project for the block mode.
	    </li><li class="listitem">
	      '''never''': Never set a package to blocked.
	    </li></ul></div><p>

	Note: When using something else then "all" you will have to deal with a number of problems:
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
		Intermediate builds can have dependency and runtime problems.
	    </li><li class="listitem">
		Your packages will get built more often, take more resources on the server side. As a result the dispatcher will rate your repository down.
	    </li></ul></div><p>
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm140625646796976"></a>15.2.3. Follow Project Links<span class="permalink"><a title="Copy Permalink" href="#idm140625646796976">¶</a></span></h3></div></div></div><p>
	</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
	      '''off''': DEFAULT: do not build packages from project links
	    </li><li class="listitem">
	      '''localdep''': only build project linked packages if they depend on a local package
	    </li><li class="listitem">
	      '''all''': treat packages from project links like local packages
	    </li></ul></div><p>
      </p></div></div></div><div class="navfooter"><table width="100%" summary="Navigation footer" border="0" class="bctable"><tr><td width="80%"><div class="breadcrumbs"><p><a href="index.html">Open Build Service</a><strong><a accesskey="p" title="Chapter 14. Administration" href="cha.obs.admin.html"><span>◀</span></a>  <a accesskey="n" title="Chapter 16. Build Job Constraints" href="cha.obs.build_job_constraints.html"><span>▶</span></a></strong></p></div></td></tr></table></div></body></html>