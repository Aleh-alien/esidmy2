<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Package Formats | Open Build Service</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="book-title" content="Open Build Service" /><meta name="chapter-title" content="Chapter 8. Package Formats" /><link rel="home" href="index.html" title="Open Build Service" /><link rel="up" href="index.html" title="Open Build Service" /><link rel="prev" href="cha.obs.request_and_review_ystem.html" title="Chapter 7. Request And Review System" /><link rel="next" href="cha.obs.image_templates.html" title="Chapter 9. Image templates" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  if (agent.indexOf('android') != -1 && agent.indexOf('chrom') != -1 ) {
      file = 'fonts-nolocal.css';
  }
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.package_formats.html">Package Formats</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Open Build Service</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="cha.obs.motivation.html"><span class="number">1 </span><span class="name">Distributing Free Software: Herding Cats</span></a></li><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">2 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">3 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">4 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.build_containers.html"><span class="number">5 </span><span class="name">Build Containers</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">6 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_ystem.html"><span class="number">7 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">8 </span><span class="name">Package Formats</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">9 </span><span class="name">Image templates</span></a></li><li class="inactive"><a href="cha.obs.build_config.html"><span class="number">10 </span><span class="name">Build Configuration</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">11 </span><span class="name">Source Services</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">12 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.signing.html"><span class="number">13 </span><span class="name">Signing</span></a></li><li class="inactive"><a href="cha.obs.product_building.html"><span class="number">14 </span><span class="name">Product Building</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">15 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">16 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.cross_arch_build.html"><span class="number">17 </span><span class="name">Cross Architecture Build</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">18 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">19 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">20 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">21 </span><span class="name">Build Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">22 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">23 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">24 </span><span class="name">openSUSE Factory</span></a></li><li class="inactive"><a href="go01.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="appendix.work_on_obs_book.html"><span class="number">A </span><span class="name">How to work on this Book</span></a></li><li class="inactive"><a href="apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 7. Request And Review System" href="cha.obs.request_and_review_ystem.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 9. Image templates" href="cha.obs.image_templates.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.package_formats.html">Package Formats</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 7. Request And Review System" href="cha.obs.request_and_review_ystem.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 9. Image templates" href="cha.obs.image_templates.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.package_formats"><div class="titlepage"><div><div><h1 class="title"><span class="number">8 </span><span class="name">Package Formats</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="cha.obs.package_formats.html#idm140659248514256"><span class="number">8.1 </span><span class="name">Setting up a format</span></a></span></dt><dt><span class="section"><a href="cha.obs.package_formats.html#idm140659252001632"><span class="number">8.2 </span><span class="name">Recipe Specials</span></a></span></dt></dl></div></div><p>
  OBS differentiates between the format of the build recipes and the format of
  the installed packages. For example, the 'spec' recipe format is used to
  build 'rpm' packages by calling rpmbuild. In most cases the build result
  format is the same as the package format used for setting up the build
  environment, but sometimes the format is different. An example is the 'kiwi'
  recipe format, which builds products and isos, but uses rpm packages to setup
  the build process.
 </p><p>
  OBS currently supports 'rpm', 'deb' (debian), 'arch' as package formats and
  'spec', 'dsc', 'kiwi' (both product and appliances), 'arch',
  'preinstallimage' and 'simpleimage' as recipe formats.
 </p><div class="section " id="idm140659248514256"><div class="titlepage"><div><div><h2 class="title" id="idm140659248514256"><span class="number">8.1 </span><span class="name">Setting up a format</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659248514256">#</a></h2></div></div></div><p>
   If no recipe format and binary format is specified in the prjconf, OBS tries
   to deduce them from the preinstall list, which includes the name of the used
   package manager. This means that you need to manually configure the 'kiwi'
   recipe config, as a 'rpm' package format will select 'spec' builds as
   default. This configuration is done by adding a 'Type' line to the project
   configuration.
  </p></div><div class="section " id="idm140659252001632"><div class="titlepage"><div><div><h2 class="title" id="idm140659252001632"><span class="number">8.2 </span><span class="name">Recipe Specials</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659252001632">#</a></h2></div></div></div><p>
   Each format has some specials
  </p><div class="section " id="idm140659240893280"><div class="titlepage"><div><div><h3 class="title" id="idm140659240893280"><span class="number">8.2.1 </span><span class="name">spec</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659240893280">#</a></h3></div></div></div><p>
    For building rpms you need a .spec file for each package, containing its
    build description. OBS parses the spec file's BuildRequires lines to get a
    list of package dependencies. OBS uses this information to both build the
    packages in the correct order and also for setting up the build
    environment. The parser understands most of rpm's macro handling, so it's
    possible to use architecture specific BuildRequires, conditional builds and
    other advanced rpm features.
   </p></div><div class="section " id="idm140659246857712"><div class="titlepage"><div><div><h3 class="title" id="idm140659246857712"><span class="number">8.2.2 </span><span class="name">deb</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659246857712">#</a></h3></div></div></div><p>
    To build *.deb files, which are used on debian-based distributions, you
    need the following files:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
debian.control
       </li></ul></div><p>
    Here are the meta informations for the package like the build dependencies
    or some description.
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
debian.rules
       </li></ul></div><p>
    This file describes the build section of the deb building process. There
    are the configure and make compile commands including other deb building
    sections.
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
$PACKAGE.dsc
       </li></ul></div><p>
    In this file you describe the package names of each subpackage and their
    dependency level. Unlike rpm, the release numbers do not get increased
    automatically during build unless the keyword DEBTRANSFORM-RELEASE gets
    added to the file.
   </p></div><div class="section " id="idm140659240983104"><div class="titlepage"><div><div><h3 class="title" id="idm140659240983104"><span class="number">8.2.3 </span><span class="name">pkg</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659240983104">#</a></h3></div></div></div><p>
    This package format is for Archlinux and his derivates. To build a
    Archlinux pkg you need a PKGBUILD file containing the build description and
    the source tarball. PKGBUILD's have no macros like %{buildroot}. They have
    variables for example makedepens=(package1, package2). This variables are
    parsed by the OBS and uses them as dependencies. On Archlinux you typically
    build packages without subpackage. They are no *-dev oder *-devel packages.
   </p></div><div class="section " id="_kiwi_appliance"><div class="titlepage"><div><div><h3 class="title" id="_kiwi_appliance"><span class="number">8.2.4 </span><span class="name">kiwi appliance</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#_kiwi_appliance">#</a></h3></div></div></div><p>
    <a class="ulink" href="http://opensuse.github.io/kiwi/" target="_blank">KIWI<span class="ulink-url"> (http://opensuse.github.io/kiwi/)</span></a> is an image producing
    platform that builds images for various formats, starting from hardware images,
    virtualization systems like QEMU, XEN and VMWare and many more.
    It supports a wide range of architecure, which are x86, x86_64, s390 and ppc.
   </p><p>
    Build instructions for KIWI usually consists of:
    </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
       <code class="command">my_image.kiwi</code> contains the image configuration in xml format.
       Full XML schema documentation can be found
       <a class="ulink" href="https://doc.opensuse.org/projects/kiwi/schema-doc/" target="_blank">here<span class="ulink-url"> (https://doc.opensuse.org/projects/kiwi/schema-doc/)</span></a>.
      </li><li class="listitem ">
       <code class="command">config.sh (optional)</code> configuration script that runs at
       the end of the installation, but before package scripts have run.
      </li><li class="listitem ">
       <code class="command">root/</code> directory that contains files that will be applied
       to the built image after package installation. This can also be an archived
       and compressed directory.
      </li></ul></div><p>
   </p><div id="idm140659250156144" class="admonition note"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>
     OBS only accepts files with a <code class="filename">.kiwi</code> suffix as a KIWI configuration file. Other
     naming schemes KIWI supports, like the 'config.xml', are getting ignored in OBS.
    </p></div><p>
    Please refer to the <a class="ulink" href="https://doc.opensuse.org/projects/kiwi/doc/" target="_blank">
    KIWI cookbook<span class="ulink-url"> (https://doc.opensuse.org/projects/kiwi/doc/)</span></a> for indepth guidance for building images with KIWI.
   </p></div><div class="section " id="idm140659250152896"><div class="titlepage"><div><div><h3 class="title" id="idm140659250152896"><span class="number">8.2.5 </span><span class="name">kiwi product</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659250152896">#</a></h3></div></div></div><p>
    ...
   </p></div><div class="section " id="idm140659250151552"><div class="titlepage"><div><div><h3 class="title" id="idm140659250151552"><span class="number">8.2.6 </span><span class="name">simpleimage</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659250151552">#</a></h3></div></div></div><p>
    This format can be used to get simple rootfs tarball or squashfs image. It
    doesn't contain bootloader nor kernel. For advanced features, use kiwi. Use
    simpleimage for simple rootfs tarball/squashfs image of any distribution
    that is supported by OBS but doesn't have anything fancier than that.
   </p><p>
    Simple image uses similar syntax as spec file. Supported tags include Name,
    Version and BuildRequires which is the way how to specify list of packages
    to include. #!BuildIgnore can be also used. For additional customization
    %build phase is supported - run via bash. RPM macros are not supported, but
    $SRCDIR shell variable is available.
   </p><div class="section " id="idm140659247113264"><div class="titlepage"><div><div><h4 class="title" id="idm140659247113264"><span class="number">8.2.6.1 </span><span class="name">Example</span> <a title="Permalink" class="permalink" href="cha.obs.package_formats.html#idm140659247113264">#</a></h4></div></div></div><div class="verbatim-wrap"><pre class="screen">          <code class="command"> 
Name:           example-image
Version:        1.0
BuildRequire:   emacs
#!BuildIgnore:  gcc-c++

%build
# Set root password
passwd &lt;&lt; EOF
opensuse
opensuse
EOF

# Enable ssh
systemctl enable sshd

          </code></pre></div></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.image_templates.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 9 </span>Image templates</span></a><a class="nav-link" href="cha.obs.request_and_review_ystem.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 7 </span>Request And Review System</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2017 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>