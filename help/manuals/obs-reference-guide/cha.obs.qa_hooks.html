<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Quality Assurance(QA) Hooks | Open Build Service</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="book-title" content="Open Build Service" /><meta name="chapter-title" content="Chapter 20. Quality Assurance(QA) Hooks" /><link rel="home" href="index.html" title="Open Build Service" /><link rel="up" href="index.html" title="Open Build Service" /><link rel="prev" href="cha.obs.authorization.token.html" title="Chapter 19. Authorization" /><link rel="next" href="cha.obs.factory.html" title="Chapter 21. openSUSE Factory" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  if (agent.indexOf('android') != -1 && agent.indexOf('chrom') != -1 ) {
      file = 'fonts-nolocal.css';
  }
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');cd
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.qa_hooks.html">Quality Assurance(QA) Hooks</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Open Build Service</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="cha.obs.motivation.html"><span class="number">1 </span><span class="name">Distributing Free Software: Herding Cats</span></a></li><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">2 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">3 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">4 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">5 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_ystem.html"><span class="number">6 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">7 </span><span class="name">Package Formats</span></a></li><li class="inactive"><a href="cha.obs.build_config.html"><span class="number">8 </span><span class="name">Build Configuration</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">9 </span><span class="name">Source Services</span></a></li><li class="inactive"><a href="cha.obs.signing.html"><span class="number">10 </span><span class="name">Signing</span></a></li><li class="inactive"><a href="cha.obs.product_building.html"><span class="number">11 </span><span class="name">Product Building</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">12 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">13 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.cross_arch_build.html"><span class="number">14 </span><span class="name">Cross Architecture Build</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">15 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">16 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">17 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">18 </span><span class="name">Build Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">19 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">20 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">21 </span><span class="name">openSUSE Factory</span></a></li><li class="inactive"><a href="go01.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="appendix.work_on_obs_book.html"><span class="number">A </span><span class="name">How to work on this Book</span></a></li><li class="inactive"><a href="apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 19. Authorization" href="cha.obs.authorization.token.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 21. openSUSE Factory" href="cha.obs.factory.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.qa_hooks.html">Quality Assurance(QA) Hooks</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 19. Authorization" href="cha.obs.authorization.token.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 21. openSUSE Factory" href="cha.obs.factory.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.qa_hooks"><div class="titlepage"><div><div><h1 class="title"><span class="number">20 </span><span class="name">Quality Assurance(QA) Hooks</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="cha.obs.qa_hooks.html#idm140395634270544"><span class="number">20.1 </span><span class="name">Source related checks</span></a></span></dt><dt><span class="section"><a href="cha.obs.qa_hooks.html#idm140395628800896"><span class="number">20.2 </span><span class="name">Build time check</span></a></span></dt><dt><span class="section"><a href="cha.obs.qa_hooks.html#idm140395627275712"><span class="number">20.3 </span><span class="name">Work-flow checks</span></a></span></dt></dl></div></div><p>
  OBS provides multiple hooks to place automated or manual tests at different
  points of time.
 </p><p>
  This chapter describes the different possibilities to provide and execute QA
  checks. The order of the items is sorted by the order in a typical
  development process. It is preferred to add a check as early as possible in
  the process to keep turn-around times small.
 </p><div class="sect1" id="idm140395634270544"><div class="titlepage"><div><div><h2 class="title" id="idm140395634270544"><span class="number">20.1 </span><span class="name">Source related checks</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395634270544">#</a></h2></div></div></div><p>
   Things which can be verified based on a given source can be checked even
   before commit time on the developers workstation. This is the earliest
   possible point of time to add a check. But it can also optionaly be enforced
   on the server side.
  </p><p>
   Automated source processing is done by source services in OBS world. Please
   check the source service chapter how to use or write one. It is important to
   decide if the test case shall output warning messages and when it shall
   report an error by exit status.
  </p><p>
   Test cases in source services get usually applied to all packages of a
   project. (It is possible to execute it only for specific packages though.)
  </p></div><div class="sect1" id="idm140395628800896"><div class="titlepage"><div><div><h2 class="title" id="idm140395628800896"><span class="number">20.2 </span><span class="name">Build time check</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395628800896">#</a></h2></div></div></div><div class="sect2" id="idm140395632417904"><div class="titlepage"><div><div><h3 class="title" id="idm140395632417904"><span class="number">20.2.1 </span><span class="name">In-package checks</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395632417904">#</a></h3></div></div></div><p>
    Checks running during the build of a package are usually test cases
    provided by the author of a package. However, also the packager might add
    simple checks, esp. for stuff which is known to break on version updates
    for example and might be forgotten when the package gets touched the next
    time.
   </p><p>
    These test are often specific for a concrete package only. So it is
    typically executed in %check section of rpm spec files directly. In case
    the check can be used with multiple package source, it is a good idea to
    package the test case in an own package and just call it from the other
    packages.
   </p><p>
    rpm calls %check after %install section and before creating the actual
    checks.
   </p><p>
    SUSE distros is also providing build time checks for testing the installed
    files inside of the build root. It is to be used for test cases which shall
    run on all packages which are build inside of a distribuition. This hook
    can be used by installing a file to /usr/lib/rpm/brp-suse.d/ directory.
    These scripts have also the power to modify the installed files if needed.
   </p></div><div class="sect2" id="idm140395628529776"><div class="titlepage"><div><div><h3 class="title" id="idm140395628529776"><span class="number">20.2.2 </span><span class="name">Post build checks</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395628529776">#</a></h3></div></div></div><p>
    The standard to test built package binaries is rpmlint for rpm based
    distros. Debian distributions are using the lintian tool.
   </p><p>
    These checks are executed by the build script after the a successful build
    happened. Please note that these are executed as standard user by default.
   </p></div><div class="sect2" id="idm140395636131168"><div class="titlepage"><div><div><h3 class="title" id="idm140395636131168"><span class="number">20.2.3 </span><span class="name">Post build root checks</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395636131168">#</a></h3></div></div></div><p>
    Files in /usr/lib/build/checks/* are executed as root user. Typical uscases
    are install tests of the build packages to ensure that the scripts inside
    of the packages are working in general.
   </p></div><div class="sect2" id="idm140395636560960"><div class="titlepage"><div><div><h3 class="title" id="idm140395636560960"><span class="number">20.2.4 </span><span class="name">KIWI specific post build root checks</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395636560960">#</a></h3></div></div></div><p>
    The file /usr/lib/build/kiwi_post_run is executed after kiwi jobs have
    finished. It can be used to run the appliance or to modify it. For example
    to package an appliance into a rpm.
   </p></div></div><div class="sect1" id="idm140395627275712"><div class="titlepage"><div><div><h2 class="title" id="idm140395627275712"><span class="number">20.3 </span><span class="name">Work-flow checks</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395627275712">#</a></h2></div></div></div><p>
   Work flow steps, for example transfering packages from one project to
   another, are done via requests in OBS. At least when multiple parties are
   involved. One or more of these parties can be automated test cases. Or human
   manual approval steps.
  </p><p>
   Default reviews can be defined inside of projects and packages. A new
   request to a certain package does get the reviewers added defined in target
   projects and packages. Reviewers can be currently users, groups or the
   maintainers of a specified project or package.
  </p><div class="sect2" id="idm140395634444832"><div class="titlepage"><div><div><h3 class="title" id="idm140395634444832"><span class="number">20.3.1 </span><span class="name">Automated test cases</span> <a title="Permalink" class="permalink" href="cha.obs.qa_hooks.html#idm140395634444832">#</a></h3></div></div></div><p>
    Open requests can be requested in an xml parseable way via the api running
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">osc api /request?states=review&amp;user=auto-review-user&amp;roles=reviewer&amp;reviewstates=new&amp;view=collection</code></pre></div><p>
    osc can also be used to accept or decline the reviews of these requests
    after running the automated test. Also a comment can be given to show
    errors which appeared. It is important that requests, which are not tested,
    for example because they are of a not matching type (eg. deleting packages)
    needs to get also a review accept. Otherwise the process would get blocked.
   </p></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.factory.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 21 </span>openSUSE Factory</span></a><a class="nav-link" href="cha.obs.authorization.token.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 19 </span>Authorization</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2016 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>