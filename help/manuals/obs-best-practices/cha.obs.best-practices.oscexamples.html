<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>OSC commands examples | Open Build Service</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="book-title" content="Open Build Service" /><meta name="chapter-title" content="Chapter 6. OSC commands examples" /><link rel="home" href="index.html" title="Open Build Service" /><link rel="up" href="index.html" title="Open Build Service" /><link rel="prev" href="cha.obs.best-practices.bootstrapping.html" title="Chapter 5. Boot Strapping" /><link rel="next" href="cha.obs.best-practices.advanced.html" title="Chapter 7. Advanced Project Setups" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.best-practices.oscexamples.html">OSC commands examples</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Open Build Service</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="cha.obs.best-practices.webuiusage.html"><span class="number">1 </span><span class="name">How to use OBS web UI</span></a></li><li class="inactive"><a href="cha.obs.best-practices.basics.html"><span class="number">2 </span><span class="name">Basic Concepts and Work Styles</span></a></li><li class="inactive"><a href="cha.obs.best-practices.upstream.html"><span class="number">3 </span><span class="name">Publishing upstream binaries</span></a></li><li class="inactive"><a href="cha.obs.best-practices.localsetup.html"><span class="number">4 </span><span class="name">OBS Local Setup</span></a></li><li class="inactive"><a href="cha.obs.best-practices.bootstrapping.html"><span class="number">5 </span><span class="name">Boot Strapping</span></a></li><li class="inactive"><a href="cha.obs.best-practices.oscexamples.html"><span class="number">6 </span><span class="name">OSC commands examples</span></a></li><li class="inactive"><a href="cha.obs.best-practices.advanced.html"><span class="number">7 </span><span class="name">Advanced Project Setups</span></a></li><li class="inactive"><a href="cha.obs.best-practices.kmp.html"><span class="number">8 </span><span class="name">Kernel Module Building</span></a></li><li class="inactive"><a href="cha.obs.best-practices.howto.html"><span class="number">9 </span><span class="name">HOW TO -- a list of common questions and solutions</span></a></li><li class="inactive"><a href="go01.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="appendix.work_on_obs_book.html"><span class="number">A </span><span class="name">How to work on this Book</span></a></li><li class="inactive"><a href="apb.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 5. Boot Strapping" href="cha.obs.best-practices.bootstrapping.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. Advanced Project Setups" href="cha.obs.best-practices.advanced.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Open Build Service"><span class="book-icon">Open Build Service</span></a><span> › </span><a class="crumb" href="cha.obs.best-practices.oscexamples.html">OSC commands examples</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 5. Boot Strapping" href="cha.obs.best-practices.bootstrapping.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. Advanced Project Setups" href="cha.obs.best-practices.advanced.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.best-practices.oscexamples"><div class="titlepage"><div><div><h1 class="title"><span class="number">6 </span><span class="name">OSC commands examples</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="cha.obs.best-practices.oscexamples.html#idm140055840831920"><span class="number">6.1 </span><span class="name">osc, the Python command line client</span></a></span></dt><dt><span class="section"><a href="cha.obs.best-practices.oscexamples.html#idm140055839412896"><span class="number">6.2 </span><span class="name">Package tracking</span></a></span></dt><dt><span class="section"><a href="cha.obs.best-practices.oscexamples.html#idm140055837572416"><span class="number">6.3 </span><span class="name">.oscrc cheatsheet</span></a></span></dt></dl></div></div><p>
  This chapter explains and shows OSC commands examples. You could use OBS much
  more efficiently with OSC commands. $man OSC will show you [GLOBALOPTS],
  SUBCOMMAND, [OPTS][ARGS....]. You also could find some OSC commands examples
  from OBS Build Service portal. This chapter will take every OSC command
  examples from OBS Build Service portal and describes it in here. You could
  visit Build Service portal OSC command explanation via below described URL.
 </p><div class="verbatim-wrap"><pre class="screen"> <code class="command">  http://en.opensuse.org/Build_Service/CLI  </code></pre></div><div class="sect1" id="idm140055840831920"><div class="titlepage"><div><div><h2 class="title" id="idm140055840831920"><span class="number">6.1 </span><span class="name">osc, the Python command line client</span> <a title="Permalink" class="permalink" href="cha.obs.best-practices.oscexamples.html#idm140055840831920">#</a></h2></div></div></div><p>
   osc is written in Python, and in addition to the commandline interface it
   also provides a Python module, for use by other Python programs. Packages
   can be found at http://download.opensuse.org/repositories/openSUSE:/Tools/
   for various distributions (openSUSE, SLES, Fedora, Mandriva, Debian, etc.).
   If you want to check out the latest source code, you can do so with Git:
  </p><div class="verbatim-wrap"><pre class="screen"> <code class="command"> git clone git@github.com:openSUSE/osc.git </code></pre></div><p>
   osc is a subversion-like client. It serves as client for the source code
   repository part of the build service, and it is used to edit metadata or
   query about build results. Introductory usage examples are shown below. Note
   the Build Service Tutorial, which gives a more systematic introduction. osc
   is extensible. You can modify the behavior or write your own commands. osc
   will ask you for your credentials when you use it for the first time, and
   store them in ~/.oscrc. The password is stored in plain text. Protect your
   ~/.oscrc file and your filesystem appropriately.
  </p><p>
   Show usage info on a command
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command">
               osc help
               osc help [cmd] 
            </code></pre></div><p>
   List existing content on the server
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command">
               osc ls                    #list projects
               osc ls Apache             #list packages in a project
               osc ls Apache flood       #list files of package of a project 
            </code></pre></div><p>
   "osc ls" shows you a list of projects on OBS. But which OBS it would show?
   it depends on your .oscrc setting. please have a look on your .oscrc file.
   If it is set as "apiurl = https://api.opensuse.org". osc ls would show
   build.opensuse.org OBS projects list to you. So what if you would like to
   list projects of another OBS?
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command">
               osc -A http://localhost:81 ls        #list your local OBS instance projects
               osc -A https://api.opensuse.org ls   #list build.opensuse.org projects
            </code></pre></div><p>
   Check out content
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command">
               osc co Apache                   #entire project
               osc co Apache flood             #a package
               osc co Apache flood flood.spec  # single file
            </code></pre></div><p>
   Update a working directory
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command">
               osc up
               osc up [directory]
               osc up *            # from within a project dir, update all packages
               osc up              # from within a project dir, update all packages AND check out all newly added packages
            </code></pre></div><p>
   Upload changed content
  </p><div class="verbatim-wrap"><pre class="screen"> Upload changed content
             <code class="command">
		osc ci                          # current dir
		osc ci [file1] [file2]          # only specific files
		osc ci [dir1] [dir2] ...        # multiple packages
		osc ci -m "updated foobar"      # specify a commit message
             </code></pre></div><p>
   See the commit log
  </p><div class="verbatim-wrap"><pre class="screen">              <code class="command">
		osc log
              </code></pre></div><p>
   Show the status (which files have been changed locally)
  </p><div class="verbatim-wrap"><pre class="screen">             <code class="command">
		osc st
		osc st [directory]
              </code></pre></div><p>
   If an update cannot be merged automatically, a file is in 'C' (conflict)
   state, and conflicts are marked with special lines. After manually resolving
   the problem, use
  </p><div class="verbatim-wrap"><pre class="screen">             <code class="command">
		osc resolved [file]
	     </code></pre></div><p>
   Mark files to be added or removed on the next 'checkin'
  </p><div class="verbatim-wrap"><pre class="screen"> 	      <code class="command"> 
		osc add foo
		osc rm foo
              </code></pre></div><p>
   Add all new files in local copy and removes all disappeared files.
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		  osc addremove
                </code></pre></div><p>
   Let OBS create a tar ball out of an SCM repository. This just creates or
   extend a _service file with some rules how to download and package sources.
   The actual work happens on a local build or on a service side build. Pleast
   note that you need at least the following packages installed for local runs:
   obs-service-tar_scm, obs-service-set_version, obs-service-recompress.
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		  osc add git://....
                </code></pre></div><p>
   Generate a diff to view the changes
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		    osc diff [file]
                </code></pre></div><p>
   Show the build results of the package
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		    osc results
		    osc results [platform]
 		</code></pre></div><p>
   Show the log file of a package (you need to be inside a package directory)
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		    osc buildlog [platform] [arch]
		</code></pre></div><p>
   Show the URLs of .repo files which are packages sources for Yum/YaST/smart
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		    osc repourls [dir]
		</code></pre></div><p>
   Trigger a package rebuild for all repositories/architectures of a package
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command"> 
		osc rebuildpac [dir]
 		</code></pre></div><p>
   Build a package on your local plattform
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		  osc build [platform] [arch] [specfile] [--clean|--noinit|...]
		</code></pre></div><p>
   Show the configured platforms/build targets.
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		   osc platforms [project]
		</code></pre></div><p>
   Show the possible build targets for your project.
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
 		    osc repos
		</code></pre></div><p>
   Show meta information
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">	
		   osc meta prj [project]
		   osc meta pkg [project] [package]
		   osc meta user [username]
		   osc meta prjconf [project]
		</code></pre></div><p>
   Edit meta information. Creates new package/project if it doesn't exist. It
   will open an Editor with the raw XML metadata. If unsure about XML, you can
   use the web client instead.
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command">
		   osc meta prj -e [project]
		   osc meta pkg -e [project] [package]
		   osc meta prjconf -e [project]
		</code></pre></div><p>
   (The project configuration (prjconf) may well be empty. It is needed in
   special cases only.) Update package meta data with metadata taken from spec
   file
  </p><div class="verbatim-wrap"><pre class="screen">		<code class="command"> 
		    osc updatepacmetafromspec [dir]
		</code></pre></div></div><div class="sect1" id="idm140055839412896"><div class="titlepage"><div><div><h2 class="title" id="idm140055839412896"><span class="number">6.2 </span><span class="name">Package tracking</span> <a title="Permalink" class="permalink" href="cha.obs.best-practices.oscexamples.html#idm140055839412896">#</a></h2></div></div></div><p>
   With osc it is also possible to manage packages in a svn like way. This
   feature is called package tracking and has to be enabled in ~/.oscrc's
   [general] section
  </p><div class="verbatim-wrap"><pre class="screen">           <code class="command"> 
             # manage your packages in a svn like way
             do_package_tracking = 1 
           </code></pre></div><p>
   Add a new package to a project
  </p><div class="verbatim-wrap"><pre class="screen"> <code class="command"> osc mkpac [package] </code></pre></div><p>
   Add an already existing directory and its files to a project
  </p><div class="verbatim-wrap"><pre class="screen"> <code class="command">  osc add [directory] </code></pre></div><p>
   Remove a package and its files from a project
  </p><div class="verbatim-wrap"><pre class="screen"> <code class="command"> osc deletepac [package] </code></pre></div><p>
   All the commands above only change your local working copy. To submit your
   changes to the buildservice you have to commit them (osc ci -m [message]).
   The status command also displays the state of the packages
  </p><div class="verbatim-wrap"><pre class="screen"> <code class="command">  osc st  </code></pre></div></div><div class="sect1" id="idm140055837572416"><div class="titlepage"><div><div><h2 class="title" id="idm140055837572416"><span class="number">6.3 </span><span class="name">.oscrc cheatsheet</span> <a title="Permalink" class="permalink" href="cha.obs.best-practices.oscexamples.html#idm140055837572416">#</a></h2></div></div></div><p>
   The [general] section Storage:
  </p><div class="verbatim-wrap"><pre class="screen">           <code class="command"> 
             # Downloaded packages are cached here. Must be writable by you.
             # default:
             packagecachedir = /var/tmp/osbuild-packagecache 
           </code></pre></div><div class="verbatim-wrap"><pre class="screen">           <code class="command"> 
             # rootdir to setup the chroot environment
             # can contain %(repo)s and/or %(arch)s for replacement
             # /[path]/%(repo)s-%(arch)s-%(project)s-%(package)s
             # default:
             build-root = /var/tmp/build-root/ 
           </code></pre></div><p>
   API communication:
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # use this API server (hostname[:port])
              # (it needs a section [api.opensuse.org] with the credentials)
              # default:
              apiurl = api.opensuse.org 
            </code></pre></div><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # use this protocol to access the API server (http or https)
              # default:
              scheme = https
            </code></pre></div><p>
   API host:
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command">  
             # API hosts can be referenced by aliases, e.g. 'osc -A alias ...'
             # List aliases for API hosts under the API host section.
             # https://api.opensuse.org
             # user=jdoe
             # aliases= 
            </code></pre></div><p>
   Local build:
  </p><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
               # Wrapper to call build as root (sudo, su -, ...)
               # default: 
               su-wrapper = su -c
               # no password required with:
               #su-wrapper = sudo
               #with entry in sudoers file:
               # [username] ALL = NOPASSWD: /usr/bin/build
            </code></pre></div><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # For convenience/debugging, osc adds internally vim gdb strace to 
              # the packages installed in the build chroot if extra-pkgs is not set to:
              #extra-pkgs=
            </code></pre></div><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # build type - possibe values:
              #  * empty -&gt; chroot
              #  * xen -&gt; xen VM
              #  * kvm -&gt; kvm VM (testing needed) 
              # default: not set/chroot
              #build-type=xen
            </code></pre></div><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # build-device - root filesystem to use for VM
              # default: not set
              #build-device=/tmp/FILE.root
            </code></pre></div><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # build-swap - swap filesystem to use for VM
              # default: not set
              #build-swap=/tmp/FILE.swap
            </code></pre></div><div class="verbatim-wrap"><pre class="screen">            <code class="command"> 
              # build-memory - amount of memory for VM
              # default: not set
              #build-memory=512
            </code></pre></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.best-practices.advanced.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 7 </span>Advanced Project Setups</span></a><a class="nav-link" href="cha.obs.best-practices.bootstrapping.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 5 </span>Boot Strapping</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2017 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>